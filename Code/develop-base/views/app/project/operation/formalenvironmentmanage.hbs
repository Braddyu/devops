<link rel="stylesheet" href="{{projcfg.appurl}}/static/css/monitoring.css">

<style>
    .current {
        display: block;
        visibility: visible;
    }

    .gray_pub_p {
        font-size: 20px;
    }

    .gray_ul {
        font-size: 16px
    }

    .gray_ul li {
        padding: 10px 0px;
    }

    .gray_circle {
        border: 1px solid black;
        border-radius: 50%;
        width: 86px;
        text-align: center;
        height: 55px;
        line-height: 55px;
        margin: 0 auto;
    }

    .gray_circle_line_right {
        border: 1px solid black;
        width: 36.5%;
        position: relative;
        top: -28px;
        float: right;
    }

    .gray_circle_line_left {
        border: 1px solid black;
        width: 36.5%;
        position: relative;
        top: 27px;
        float: left;
    }

    .active hr {
        border-color: green;

    }

    .active .gray_circle {
        background-color: green;
        color: white;
    }

    .active {
        display: block !important;
    }
    .button{
        height: 40px;
        width: 120px;
        border: none;
        border-radius: 2px;
        font-size: 18px;
        font-family: Tahoma;
        background-color: #2888d4;
    }
    .record{
        text-align: center;
        background-color: #ddd;
    }
</style>

<div class="row">
    <div class="col-xs-12 col-md-12">
        <div class="widget">
            <div class="widget-body">
                <div class="row">
                    <div class="col-cs-12 col-md-12">
                        <div class="widget-header header-box-moni bordered-bottom bordered-themeprimary">
                            <i class="widget-icon fa fa-tags themeprimary"></i>
                            <span class="widget-caption themeprimary">应用监控</span>
                            <div class="widget-buttons " style="">
                                <div class="f-r ">
                                    <select style="margin:0px">
                                        <option>
                                            全部
                                        </option>
                                        <option>
                                            运行中
                                        </option>
                                        <option>
                                            故障
                                        </option>
                                    </select>
                                    <button style="margin:0px;float:initial">查询</button>
                                </div>
                            </div>
                        </div>

                        <div class="widget-body">
                            <div style="">
                                <div class="box-list-content">
                                    <div class="product-box">
                                        <div class="content-box">
                                            <section class="basic-infom-box">
                                                <div class="basic-infom clearfix">
                                                    <h3>
                                                        <label>项目名称：</label>
                                                        <span id="projectName">微服务容器架构平台</span>
                                                    </h3>
                                                     <p>
                                                         <label>镜像：</label>
                                                         <span id="gitAddress">117.187.12.236:15000/micro-service:v1.5.7</span>
                                                     </p>
                                                     <p>
                                                         <label>外网地址：</label>
                                                         <span id="netadd">117.187.12.236:10002</span>
                                                     </p>
                                                </div>
                                                <!--<div class="rongqi-box clearfix">
                                                    <div class="pull-left">
                                                        <label>运行实例：</label>
                                                        <button class="btn-fuhao" type="button" id="substract">-</button>
                                                        <input id="instance_number" class="rongqi-shuzhi" type="text" value="1">
                                                        <button class="btn-fuhao" type="button" id="plus">+</button>
                                                    </div>
                                                </div>-->
                                            </section>
                                            <section class="tubiao-box">
                                                <div class="tab" id="tab">
                                                    <ul class="dd clearfix">
                                                        <li class="current">流量监控</li>
                                                        <!--<li>容器监控</li>-->
                                                        <li>服务监控</li>
                                                    </ul>
                                                    <div class="dt">
                                                        <ul class="clearfix">
                                                            <li class="show">
                                                                <iframe src="http://192.168.9.69:3000/dashboard-solo/db/dockercontainernetio?orgId=1&panelId=1&from=1507852248537&to=1507873848537"
                                                                        width="100%" height="350" frameborder="0"></iframe>
                                                            </li>
                                                           <!-- <li style="height:400px;width:100%">
                                                                <div id="camkmpdeploy"></div>
                                                            </li>-->
                                                            <li>
                                                                <div>
                                                                    <img src="{{projcfg.appurl}}/static/image/img11.png">
                                                                </div>
                                                            </li>
                                                        </ul>

                                                    </div>
                                                </div>
                                            </section>
                                            <section class="basic-infom-box"style="height:200px;">
                                                <span class="widget-caption "style="font-size: 18px;font-weight:bolder;line-height:40px;">策略配置</span>
                                                <div class="row"style="border-botton:1px solid #ddd;border-top:1px solid #ddd;padding:10px 10px;">
                                                    <div>
                                                        <div class="col-md-2">
                                                            <select name="" id="">
                                                                <option value="平均流量">平均流量</option>
                                                                <option value="峰值流量">峰值流量</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select name="" id="">
                                                                <option value=">">&gt</option>
                                                                <option value="<">&lt</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input type="text"style="width: 80px;height: 33px;padding: 3px;">m/s
                                                        </div>
                                                        <div class="col-md-1">
                                                            <span style="line-height:44px;">触发</span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select name="" id="">
                                                                <option value="动态缩容">动态扩容</option>
                                                                <option value="动态缩容">动态缩容</option>
                                                                <option value="短信通知">短信通知</option>
                                                                <option value="邮件通知">邮件通知</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <button class="button"style="width:80px;height:36px;color:#fff;">保存</button>
                                                            <button class="button"style="width:80px;height:36px;color:#fff;">取消</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div style="padding-top:10px;">
                                                    <div class="col-md-2">
                                                        <span style="line-height:44px;">峰值流量</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <span style="line-height:44px;"> &gt</span>


                                                    </div>
                                                    <div class="col-md-2">
                                                         <span style="line-height:44px;"> 4000m/s</span>

                                                    </div>
                                                    <div class="col-md-1">
                                                        <span style="line-height:44px;">触发</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <span style="line-height:44px;">动态扩容</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <button class="button"style="width:80px;height:36px;color:#fff;">修改</button>
                                                        <button class="button"style="width:80px;height:36px;color:#fff;">删除</button>
                                                    </div>
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    window.onload = function () {
        tab("tab");
        function tab(id) {
            var obj = document.getElementById(id);
            var spans = obj.children[0].children;
            var lis = obj.children[1].children[0].children;
            for (var i = 0, len = spans.length; i < len; i++) {

                spans[i].onclick = function (num) {
                    return function () {
                        for (var j = 0, len = spans.length; j < len; j++) {
                            spans[j].className = "";
                            lis[j].className = "";
                        }
                        spans[num].className = "current";
                        lis[num].className = "show";
                        if (num == 1) {
                            resize()

                        }
                    }
                }(i);

            }

        }
    }
    function resize(){
        $('#camkmpdeploy').datagrid({
            url: '{{projcfg.appurl}}/api/project/operation/grayenvironmentmanage/deploy/info',
            method: 'get',
            queryParams: {},
            rownumbers: false,
            striped: true,
            fitColumns: true,
            fit: true,
            border: true,
            singleSelect: true,
            selectOnCheck: false,
            columns: [[
                { "field": 'service_id', checkbox: true },
                { "field": "service_tag", "title": "名称", "width": 50, align: "center" },
                { "field": "image_id", "title": "CPU", "width": 40, align: "center" },
                { "field": "container_id", "title": "硬盘", "width": 50, align: "center" },
                {
                    "field": "memorytool", "title": "内存", "width": 20, align: "center", formatter: function () {
                        return 100
                    }
                },
                {
                    "field": "status", "title": "状态", "width": 25, align: "center",
                    "formatter": function (value, rowData, rowIndex) {
                        return '运行中';
                    }
                },
                { "field": "remark", "title": "备注", "width": 25, align: "center" },
                {
                    "field": "oper", "title": "操作", "width": 40, align: "center",
                    "formatter": function (value, rowData, rowIndex) {
                        return "<span class=\"label label-info\" style='height:26px;line-height:16px;font-weight:600;margin-top: 0.5rem;margin-left: 0.5rem;cursor: pointer;' onclick='hm_list(\"" + rowData.master_id + "\",\"" + rowData.master_ip + "\")'>主机管理</span><span class=\"label label-success\" style='height:26px;line-height:16px;font-weight:600;margin-top: 0.5rem;margin-left: 0.5rem;cursor: pointer;' onclick='colonymanage(\"" + rowData.id + "\")'>集群概览</span>";
                    }
                }
            ]],
            onLoadError: function () {
                msgError('加载数据出现时发生错误,请稍候重试...');
            },
            pagination: true,
            loadMsg: '正在加载...'
        });
    }





</script>